<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>How It Works - MADURO.GG</title>
  <link rel="stylesheet" href="/css/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    .how-page {
      min-height: 100vh;
      background: #0a0a0a;
      color: #fff;
    }

    .how-header {
      padding: 20px 40px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .how-header .logo {
      font-size: 24px;
      font-weight: 700;
    }

    .how-header .logo a {
      text-decoration: none;
      color: inherit;
    }

    .logo-text { color: #fff; }
    .logo-tag { color: #ff4444; }

    .back-link {
      color: #888;
      text-decoration: none;
      transition: color 0.2s;
    }

    .back-link:hover { color: #fff; }

    .how-content {
      max-width: 900px;
      margin: 0 auto;
      padding: 60px 40px;
    }

    .how-title {
      font-size: 48px;
      font-weight: 700;
      margin-bottom: 20px;
    }

    .how-subtitle {
      font-size: 20px;
      color: #888;
      margin-bottom: 60px;
    }

    .section {
      margin-bottom: 60px;
    }

    .section-title {
      font-size: 28px;
      font-weight: 600;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .section-title .icon {
      font-size: 32px;
    }

    .section-content {
      color: #ccc;
      line-height: 1.8;
      font-size: 16px;
    }

    .section-content p {
      margin-bottom: 16px;
    }

    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }

    .feature-card {
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 12px;
      padding: 24px;
    }

    .feature-card h4 {
      font-size: 18px;
      margin-bottom: 10px;
      color: #fff;
    }

    .feature-card p {
      color: #888;
      font-size: 14px;
      line-height: 1.6;
    }

    .code-block {
      background: #111;
      border: 1px solid #333;
      border-radius: 8px;
      padding: 20px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 14px;
      overflow-x: auto;
      margin: 20px 0;
    }

    .code-label {
      color: #888;
      font-size: 12px;
      margin-bottom: 10px;
      text-transform: uppercase;
    }

    .code-value {
      color: #4ade80;
      word-break: break-all;
    }

    .code-link {
      color: #60a5fa;
      text-decoration: none;
    }

    .code-link:hover {
      text-decoration: underline;
    }

    .timeline {
      position: relative;
      padding-left: 30px;
      margin: 30px 0;
    }

    .timeline::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 2px;
      background: linear-gradient(to bottom, #ff4444, #4ade80);
    }

    .timeline-item {
      position: relative;
      padding: 20px 0;
      padding-left: 30px;
    }

    .timeline-item::before {
      content: '';
      position: absolute;
      left: -35px;
      top: 26px;
      width: 12px;
      height: 12px;
      background: #fff;
      border-radius: 50%;
    }

    .timeline-item h4 {
      font-size: 18px;
      margin-bottom: 8px;
    }

    .timeline-item p {
      color: #888;
      font-size: 14px;
    }

    .stat-row {
      display: flex;
      gap: 40px;
      margin: 30px 0;
      flex-wrap: wrap;
    }

    .stat-item {
      text-align: center;
    }

    .stat-value {
      font-size: 36px;
      font-weight: 700;
      color: #ff4444;
    }

    .stat-label {
      font-size: 14px;
      color: #888;
      margin-top: 5px;
    }

    .warning-box {
      background: rgba(255,68,68,0.1);
      border: 1px solid rgba(255,68,68,0.3);
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
    }

    .warning-box h4 {
      color: #ff4444;
      margin-bottom: 10px;
    }

    .contract-placeholder {
      background: rgba(96,165,250,0.1);
      border: 1px dashed rgba(96,165,250,0.5);
      border-radius: 8px;
      padding: 20px;
      text-align: center;
      margin: 20px 0;
    }

    .contract-placeholder p {
      color: #60a5fa;
      margin: 0;
    }

    @media (max-width: 768px) {
      .how-content {
        padding: 40px 20px;
      }

      .how-title {
        font-size: 32px;
      }

      .section-title {
        font-size: 22px;
      }

      .stat-row {
        justify-content: center;
      }
    }
  </style>
</head>
<body class="how-page">
  <header class="how-header">
    <div class="logo">
      <a href="/"><span class="logo-text">MADURO</span><span class="logo-tag">.GG</span></a>
    </div>
    <a href="/" class="back-link">Back to Game</a>
  </header>

  <main class="how-content">
    <h1 class="how-title">How It Works</h1>
    <p class="how-subtitle">The world's first on-chain Battle Royale memecoin game</p>

    <!-- Game Overview -->
    <section class="section">
      <h2 class="section-title"><span class="icon">üéÆ</span> The Game</h2>
      <div class="section-content">
        <p>MADURO.GG is an Agar.io-style multiplayer game where you control a cell that grows by eating food and other players. The twist? <strong>You always see yourself as Trump, while everyone else appears as Maduro</strong> (and vice versa for them). Everyone is the hero of their own story.</p>

        <div class="feature-grid">
          <div class="feature-card">
            <h4>Battle Royale Rounds</h4>
            <p>10-minute rounds. Last player standing or highest mass wins the entire prize pool.</p>
          </div>
          <div class="feature-card">
            <h4>Fair Play Lock</h4>
            <p>No new players can join after 5 minutes into a round. No late-game ambushes.</p>
          </div>
          <div class="feature-card">
            <h4>Room System</h4>
            <p>30 players max per room. New rooms auto-created when full. Everyone sees everyone.</p>
          </div>
          <div class="feature-card">
            <h4>Real Stakes</h4>
            <p>Connect your wallet to compete for the prize pool. No wallet = playing for fun.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Round Flow -->
    <section class="section">
      <h2 class="section-title"><span class="icon">‚è±Ô∏è</span> Round Flow</h2>
      <div class="section-content">
        <div class="timeline">
          <div class="timeline-item">
            <h4>Waiting for Players</h4>
            <p>Minimum 2 players needed to start. Join any open room.</p>
          </div>
          <div class="timeline-item">
            <h4>30-Second Countdown</h4>
            <p>Get ready! Round is about to begin. Last chance to join.</p>
          </div>
          <div class="timeline-item">
            <h4>10-Minute Battle (Join Window: First 5 min)</h4>
            <p>Eat, grow, dominate. Room locks at 5-minute mark.</p>
          </div>
          <div class="timeline-item">
            <h4>Winner Takes All</h4>
            <p>Last alive OR highest mass when timer ends wins the prize pool.</p>
          </div>
          <div class="timeline-item">
            <h4>15-Second Intermission</h4>
            <p>Results shown. Next round begins automatically.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Controls -->
    <section class="section">
      <h2 class="section-title"><span class="icon">üïπÔ∏è</span> Controls</h2>
      <div class="section-content">
        <div class="feature-grid">
          <div class="feature-card">
            <h4>Desktop</h4>
            <p><strong>WASD / Arrow Keys:</strong> Move<br>
            <strong>Spacebar:</strong> Split (35+ mass)<br>
            <strong>E:</strong> Eject mass (32+ mass)</p>
          </div>
          <div class="feature-card">
            <h4>Mobile</h4>
            <p><strong>Virtual Joystick:</strong> Move<br>
            <strong>SPLIT Button:</strong> Split cell<br>
            <strong>EJECT Button:</strong> Shoot mass</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Game Mechanics -->
    <section class="section">
      <h2 class="section-title"><span class="icon">üìä</span> Game Mechanics</h2>
      <div class="section-content">
        <div class="stat-row">
          <div class="stat-item">
            <div class="stat-value">1.25x</div>
            <div class="stat-label">Mass to Eat</div>
          </div>
          <div class="stat-item">
            <div class="stat-value">16</div>
            <div class="stat-label">Max Cells</div>
          </div>
          <div class="stat-item">
            <div class="stat-value">22,500</div>
            <div class="stat-label">Max Mass</div>
          </div>
          <div class="stat-item">
            <div class="stat-value">150+</div>
            <div class="stat-label">Virus Pop Mass</div>
          </div>
        </div>

        <p><strong>Eating:</strong> You must be 25% larger than another player to consume them. Smaller cells can hide inside viruses (green spiky circles).</p>
        <p><strong>Splitting:</strong> Doubles your cells and launches half your mass forward. Great for catching prey or escaping.</p>
        <p><strong>Viruses:</strong> Feed a virus 7 times (eject mass at it) to spawn a new virus. Large players (150+ mass) explode when touching viruses.</p>
      </div>
    </section>

    <!-- Smart Contract -->
    <section class="section">
      <h2 class="section-title"><span class="icon">üîê</span> On-Chain Infrastructure</h2>
      <div class="section-content">
        <p>MADURO.GG uses trustless on-chain escrow for prize distribution. No need to trust that rewards will be sent - the smart contract handles everything transparently.</p>

        <div class="code-block">
          <div class="code-label">Escrow Contract (Devnet)</div>
          <div class="code-value" id="contract-address">DLLQxjjnjiyRQHFt7Q63G7TLvVu9WAf4aCyd2q1qPAbF</div>
          <a href="https://solscan.io/account/DLLQxjjnjiyRQHFt7Q63G7TLvVu9WAf4aCyd2q1qPAbF?cluster=devnet" target="_blank" class="code-link">View on Solscan ‚Üí</a>
        </div>

        <div class="feature-grid">
          <div class="feature-card">
            <h4>Prize Pool PDA</h4>
            <p>Tokens are held in a Program Derived Address, not a personal wallet. Fully auditable on-chain.</p>
          </div>
          <div class="feature-card">
            <h4>Automatic Distribution</h4>
            <p>When a round ends, the contract automatically transfers the prize to the winner's wallet.</p>
          </div>
          <div class="feature-card">
            <h4>Transparent History</h4>
            <p>Every distribution is recorded on-chain. Check Solscan for complete transaction history.</p>
          </div>
          <div class="feature-card">
            <h4>Open Source</h4>
            <p>Smart contract code is open source and verified. Trust the code, not the team.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Token -->
    <section class="section">
      <h2 class="section-title"><span class="icon">ü™ô</span> $MADURO Token</h2>
      <div class="section-content">
        <div class="code-block">
          <div class="code-label">Token Contract</div>
          <div class="code-value" id="token-mint">Loading...</div>
          <a href="#" id="token-link" target="_blank" class="code-link">View on pump.fun ‚Üí</a>
        </div>

        <p><strong>Prize Pool Funding:</strong> Creator fees (0.3%) from all $MADURO trades on pump.fun flow into the game's prize pool. The more volume, the bigger the prizes.</p>

        <div class="warning-box">
          <h4>Not Financial Advice</h4>
          <p>$MADURO is a memecoin. Only play with what you can afford to lose. The game is for entertainment purposes. DYOR.</p>
        </div>
      </div>
    </section>

    <!-- Technical -->
    <section class="section">
      <h2 class="section-title"><span class="icon">‚öôÔ∏è</span> Technical Details</h2>
      <div class="section-content">
        <div class="code-block">
          <div class="code-label">Stack</div>
          <pre style="margin:0;color:#ccc;">
Backend:    Node.js + Express + Socket.IO
Frontend:   HTML5 Canvas + Vanilla JS
Wallet:     Phantom Integration
Contracts:  Anchor (Solana)
Hosting:    Railway (WebSocket) + Vercel (Static)
Tick Rate:  60 Hz (Server Authoritative)</pre>
        </div>

        <p><strong>Server Authoritative:</strong> All game logic runs server-side to prevent cheating. The client only handles rendering and input.</p>
        <p><strong>Real-Time Sync:</strong> 60 updates per second ensure smooth gameplay. Interpolation provides butter-smooth visuals.</p>
      </div>
    </section>

    <!-- Links -->
    <section class="section">
      <h2 class="section-title"><span class="icon">üîó</span> Links</h2>
      <div class="section-content">
        <div class="feature-grid">
          <div class="feature-card">
            <h4>Play Now</h4>
            <p><a href="/" class="code-link">maduro.gg</a></p>
          </div>
          <div class="feature-card">
            <h4>Buy Token</h4>
            <p><a href="https://pump.fun/coin/CmgJ1PobhUqB7MEa8qDkiG2TUpMTskWj8d9JeZWSpump" target="_blank" class="code-link" id="pump-link">pump.fun</a></p>
          </div>
          <div class="feature-card">
            <h4>Twitter</h4>
            <p><a href="#" class="code-link" id="twitter-link">@madurogg</a></p>
          </div>
          <div class="feature-card">
            <h4>Telegram</h4>
            <p><a href="#" class="code-link" id="telegram-link">t.me/madurogg</a></p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script>
    // Load config from server
    fetch('/api/config')
      .then(r => r.json())
      .then(config => {
        if (config.tokenMint) {
          document.getElementById('token-mint').textContent = config.tokenMint;
          document.getElementById('token-link').href = `https://pump.fun/coin/${config.tokenMint}`;
          document.getElementById('pump-link').href = `https://pump.fun/coin/${config.tokenMint}`;
        }
        if (config.contractAddress) {
          document.getElementById('contract-address').textContent = config.contractAddress;
        }
        if (config.twitter) {
          document.getElementById('twitter-link').href = config.twitter;
        }
        if (config.telegram) {
          document.getElementById('telegram-link').href = config.telegram;
        }
      })
      .catch(() => {
        document.getElementById('token-mint').textContent = 'CmgJ1PobhUqB7MEa8qDkiG2TUpMTskWj8d9JeZWSpump';
      });
  </script>
</body>
</html>
